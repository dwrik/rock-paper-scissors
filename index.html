<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Rock Paper Scissors!</title>
    </head>
    <body>
        <h3>Welcome to Rock Paper Scissors !!</h3>
    </body>
    <script>
        
        // declare constants
        const ROCK = 'rock';
        const PAPER = 'paper';
        const SCISSORS = 'scissors';

        // simulate computer's play
        function computerPlay() {

            let choices = [ROCK, PAPER, SCISSORS];
            let random = Math.floor(Math.random() * 3);

            return choices[random];
        }

        // simulate a single round
        function playRound(playerSelection, computerSelection) {

            // tie
            if (playerSelection == computerSelection) {
                return null;
            }

            // win/lose
            if ((playerSelection == ROCK && computerSelection == SCISSORS)
            || (playerSelection == PAPER && computerSelection == ROCK)
            || (playerSelection == SCISSORS && computerSelection == PAPER)) {
                return true;
            } else {
                return false;
            }
        }

        // simulate a 5 round game
        function game() {

            // score
            let playerWins = 0;
            let computerWins = 0;

            for (let i=0; i<5; i++) {

                // get plays
                let computerSelection = computerPlay();
                let playerSelection = prompt('Enter your choice (Rock, Paper, Scissors)?').toLowerCase();

                // play round
                let playerWon = playRound(playerSelection, computerSelection);

                console.log('computer: ' + computerSelection + '\tplayer: ' + playerSelection);

                // check for tie
                if (playerWon == null) {
                    console.log('It\'s a tie!');
                    continue;
                }

                // check for winner
                if (playerWon) {
                    console.log(`You Won! ${capitalize(playerSelection)} beats ${capitalize(computerSelection)}`);
                    playerWins++;
                } else {
                    console.log(`You Lose! ${capitalize(computerSelection)} beats ${capitalize(playerSelection)}`);
                    computerWins++;
                }
            }

            let result;

            if (playerWins > computerWins) {
                result = 'Congratulations! You won the game';
            } else if (computerWins > playerWins) {
                result =  'Sorry! You lost the game';
            } else {
                result = 'It\'s a tie!';
            }

            console.log(result);
        }

        // helper
        function capitalize(string) {
            return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();
        }

        game();

    </script>
</html>